<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script>
	navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
	/**現在位置情報を取得**/
	function successCallback(position) {
	var gl_text = "緯度：" + position.coords.latitude + "<br>";
	gl_text += "経度：" + position.coords.longitude + "<br>";
	gl_text += "高度：" + position.coords.altitude + "<br>";
	gl_text += "緯度・経度の誤差：" + position.coords.accuracy + "<br>";
	gl_text += "高度の誤差：" + position.coords.altitudeAccuracy + "<br>";
	gl_text += "方角：" + position.coords.heading + "<br>";
	gl_text += "速度：" + position.coords.speed + "<br>";
	gl_text += Date(position.timestamp).toLocaleString() + "<br>";
	document.getElementById("show_result").innerHTML = gl_text;
	document.getElementById("getLocationMap").href = 'http://maps.google.com/maps?q=' + position.coords.latitude + ',' + position.coords.longitude;
	}

	/**取得できない場合**/
	function errorCallback(error) {
	var err_msg = "";
	switch(error.code)
		{
		case 1:
		err_msg = "位置情報の利用が許可されていません";break;
		case 2:
		err_msg = "デバイスの位置が判定できません";break;
		case 3:
		err_msg = "タイムアウトしました";break;
		}
	document.getElementById("show_result").innerHTML = err_msg;
	}

	</script>

  <title>Geolocation APIを用いた位置表示</title>
</head>
<body>
	<style>
	#show_result{ width:800px; margin:0 auto; }
  	</style>
	<p>現在位置を表示</p>
	<div id="show_result"></div>
	<a href="" target="_blank" id="getLocationMap" width=400px margin=0 >GoogleMapで位置を確認</a>
</body> 
</html>
